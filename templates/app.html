{{ template "header.html" . }}

{{ $screenshots := .Items }}
{{ with .Item }}
<main class="page columns">
	<div class="column">
		<div class="carousel" data-start="0">
			<ul class="carousel-items">
				{{ range $i, $screenshot := $screenshots }}
				<li class="carousel-item{{ if eq $i 0 }} active{{ end }}">
					<img class="picture" title="{{ .Description }}" alt="{{ .Description }}" src="{{ .Image }}" />
				</li>
				{{ end }}
			</ul>
			<div class="carousel-badges">
				<ul class="carousel-badges-bar">
                    {{ range $i, $screenshot := $screenshots }}
					<a href="#" class="carousel-badge{{ if eq $i 0 }} active{{ end }}" data-index="{{ $i }}"></a>
					{{ end }}
				</ul>
			</div>
			<div class="carousel-overlay">
				<a href="#" class="button previous" data-index="-1"><i class="icon-navigate_before"></i></a>
				<a href="#" class="center toggle-grow"></a>
				<a href="#" class="button next" data-index="+1"><i class="icon-navigate_next"></i></a>
			</div>
		</div>
		<div class="apps">
        {{/*
			{% if page.apps.link %}
			<a href="{{ page.apps.link.url }}" class="link">
				<i class="icon-public"></i>
				<span>Visit website</span>
			</a>
			{% endif %}
			{% if page.apps.googleplay %}
			<a href="{% if page.apps.googleplay.package %}https://play.google.com/store/apps/details?id={{ page.apps.googleplay.package }}{% else %}{{ page.apps.googleplay.url }}{% endif %}" class="link">
				<i class="icon-shop"></i>
				<span>Get it on Google Play</span>
			</a>
			{% endif %}
			{% if page.apps.appstore %}
			<a href="{{ page.apps.appstore.url }}" class="link">
				<i class="icon-apple"></i>
				<span>Download on the App Store</span>
			</a>
			{% endif %}
			{% if page.apps.download %}
			<a href="{{ page.apps.download.url }}" class="link" id="download">
				<i class="icon-get_app"></i>
				<span>Download {{ page.apps.download.type }}</span>
			</a>
			{% endif %}
        */}}
		</div>
	</div>
	<div class="column">
		<header>
			<h1>{{ .Name }}</h1>
			<p>
				{{ range .Platforms }}#{{ . }} {{ end }}{{ range .Year }}#year-{{ . }} {{ end }}#{{ .Type }}
			</p>
			<p class="authors">
				{{ andify .Authors }}
			</p>
			{{ if .Achievements }}
			<h6 class="achievement-header">Achievements</h6>
			<div class="achievements plain">
				{{ donotescape .Achievements }}
			</div>
			{{ end }}
		</header>
		<div class="content">
			{{ donotescape .Content }}
		</div>
	</div>
</main>
<script src="/assets/js/carousel.js"></script>
<script>
	document.addEventListener("DOMContentLoaded", function () {
		var c = new Carousel(".carousel");
		c.autoplay();
		// TODO: rewrite below
		var f = true;
		var h = document.querySelectorAll(".column")[1].innerHTML;
		document.querySelector(".toggle-grow").addEventListener("click", function toggle() {
			if (window.matchMedia("(min-width: 960px)").matches && !document.querySelector(".mobile")) {
				if (f) {
					document.querySelector("main").style.flexWrap = "wrap";
					document.querySelector(".carousel").style.maxWidth = "85rem";
					document.querySelector(".column").style.maxWidth = "calc(84rem + 20vw)";
					document.querySelectorAll(".column")[1].style.margin = "0";
					document.querySelectorAll(".column")[1].style.flex = "0";
					document.querySelectorAll(".column")[1].style.opacity = "0";
					document.querySelectorAll(".column")[1].innerHTML = "";
				} else {
					document.querySelector("main").style.flexWrap = "nowrap";
					document.querySelector(".carousel").style.maxWidth = "48rem";
					document.querySelector(".column").style.maxWidth = "48rem";
					document.querySelectorAll(".column")[1].style.flex = "1";
					document.querySelectorAll(".column")[1].style.opacity = "1";
					document.querySelectorAll(".column")[1].style.margin = "0 2rem";
					document.querySelectorAll(".column")[1].innerHTML = h;
					setTimeout(function () {
						document.querySelectorAll(".column")[1].innerHTML = h;
					}, 400);
				}
				f = !f;
			}
		});
	});
</script>
{{/*
<script src="/assets/js/popup.js"></script>
<script>
	document.addEventListener("DOMContentLoaded", function () {
		var download = document.querySelector("#download");
		var downloadurl = download.href;
		download.href = "#java";
		var popup = new Popup("java", '<div class="text"><h1>Requires Java</h1><p>Java is required to run this application. If the application does not run, <a href="https://www.java.com/verify/">verify that java is installed</a>. </p><p><a class="btn" href="' + downloadurl + '">Continue downloading JAR</a> <a class="btn light" href="https://www.java.com/download/">Get Java</a></p></div>', function () {
				
		});
	});
</script>
*/}}
{{ end }}

{{ template "footer.html" . }}
